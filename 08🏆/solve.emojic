ğŸ“œ ğŸ”¤../emojicode/common.emojicğŸ”¤

ğŸ’­ 0: 6 segments (abcefg)
ğŸ’­ 1: 2 segments (cf)
ğŸ’­ 2: 5 segments (acdeg)
ğŸ’­ 3: 5 segments (acdfg)
ğŸ’­ 4: 4 segments (bcdf)
ğŸ’­ 5: 5 segments (abdfg)
ğŸ’­ 6: 6 segments (abdefg)
ğŸ’­ 7: 3 segments (acf)
ğŸ’­ 8: 7 segments (abcdefg)
ğŸ’­ 9: 6 segments (abcdfg)

ğŸ‡ ğŸ† ğŸ‡
    ğŸ“— Returns the valid test case names for this puzzle ğŸ“—
    ğŸ‡ â“ğŸ§ª â¡ï¸ ğŸ¨ğŸšğŸ”¡ğŸ† ğŸ‡
        â†©ï¸ ğŸ¿ ğŸ”¤00ğŸ”¤ ğŸ†
    ğŸ‰

    ğŸ“— 
        Returns the solution for part A of the puzzle 
        how many times do digits 1, 4, 7, or 8 appear?
    ğŸ“—
    ğŸ‡ â“ğŸ…°ï¸ inputğŸ¨ğŸšğŸ”¡ğŸ† â¡ï¸ ğŸ”¡ ğŸ‡
        0 â¡ï¸ ğŸ–ï¸ğŸ†•instancesOfUniqueSegmentDigits
        ğŸ”‚ line input ğŸ‡
            ğŸ”«line ğŸ”¤ | ğŸ”¤â— â¡ï¸ halves
            ğŸ½halves 1â— â¡ï¸ output
            ğŸ”«output ğŸ”¤ ğŸ”¤â— â¡ï¸ outputValues
            ğŸ”‚ value outputValues ğŸ‡
                ğŸ¶valueâ— â¡ï¸ segments
                ğŸ“segmentsâ“ â¡ï¸ segmentLength
                ğŸ’­ ğŸ˜€ğŸ”¤segment length: ğŸ§²segmentLengthğŸ§²ğŸ”¤â—
                â†ªï¸ ğŸ¤œsegmentLength ğŸ™Œ 2ğŸ¤› ğŸ‘ ğŸ¤œsegmentLength ğŸ™Œ 4ğŸ¤› ğŸ‘ ğŸ¤œsegmentLengthğŸ¤› ğŸ™Œ 3 ğŸ‘ ğŸ¤œsegmentLength ğŸ™Œ 7ğŸ¤› ğŸ‡
                    instancesOfUniqueSegmentDigits â¬…ï¸â• 1
                ğŸ‰
            ğŸ‰
        ğŸ‰
        â†©ï¸ ğŸ”¡instancesOfUniqueSegmentDigitsâ—
    ğŸ‰
    
    ğŸ“— 
        Returns the solution for part B of the puzzle 
        What is the sum of all output numbers?
    ğŸ“—
    ğŸ‡ â“ğŸ…±ï¸ inputğŸ¨ğŸšğŸ”¡ğŸ† â¡ï¸ ğŸ”¡ ğŸ‡
        ğŸ¿
            ğŸ”¤0ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤bğŸ”¤ ğŸ”¤cğŸ”¤ ğŸ”¤eğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ”¤gğŸ”¤ ğŸ†
            ğŸ”¤1ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤cğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ†
            ğŸ”¤2ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤cğŸ”¤ ğŸ”¤dğŸ”¤ ğŸ”¤eğŸ”¤ ğŸ”¤gğŸ”¤ ğŸ†
            ğŸ”¤3ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤cğŸ”¤ ğŸ”¤dğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ”¤gğŸ”¤ ğŸ†
            ğŸ”¤4ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤bğŸ”¤ ğŸ”¤cğŸ”¤ ğŸ”¤dğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ†
            ğŸ”¤5ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤bğŸ”¤ ğŸ”¤dğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ”¤gğŸ”¤ ğŸ†
            ğŸ”¤6ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤bğŸ”¤ ğŸ”¤dğŸ”¤ ğŸ”¤eğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ”¤gğŸ”¤ ğŸ†
            ğŸ”¤7ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤cğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ†
            ğŸ”¤8ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤bğŸ”¤ ğŸ”¤cğŸ”¤ ğŸ”¤dğŸ”¤ ğŸ”¤eğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ”¤gğŸ”¤ ğŸ†
            ğŸ”¤9ğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤ağŸ”¤ ğŸ”¤bğŸ”¤ ğŸ”¤cğŸ”¤ ğŸ”¤dğŸ”¤ ğŸ”¤fğŸ”¤ ğŸ”¤gğŸ”¤ ğŸ†
        ğŸ† â¡ï¸ lettersByDigit
        ğŸ’­ ğŸ¿
        ğŸ’­     ğŸ”¤ağŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤0ğŸ”¤ ğŸ”¤2ğŸ”¤ ğŸ”¤3ğŸ”¤ ğŸ”¤5ğŸ”¤ ğŸ”¤6ğŸ”¤ ğŸ”¤7ğŸ”¤ ğŸ”¤8ğŸ”¤ ğŸ”¤9ğŸ”¤ ğŸ†
        ğŸ’­     ğŸ”¤bğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤0ğŸ”¤ ğŸ”¤4ğŸ”¤ ğŸ”¤5ğŸ”¤ ğŸ”¤6ğŸ”¤ ğŸ”¤8ğŸ”¤ ğŸ”¤9ğŸ”¤ ğŸ†
        ğŸ’­     ğŸ”¤cğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤0ğŸ”¤ ğŸ”¤1ğŸ”¤ ğŸ”¤2ğŸ”¤ ğŸ”¤3ğŸ”¤ ğŸ”¤4ğŸ”¤ ğŸ”¤7ğŸ”¤ ğŸ”¤8ğŸ”¤ ğŸ”¤9ğŸ”¤ ğŸ†
        ğŸ’­     ğŸ”¤dğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤2ğŸ”¤ ğŸ”¤3ğŸ”¤ ğŸ”¤4ğŸ”¤ ğŸ”¤5ğŸ”¤ ğŸ”¤6ğŸ”¤ ğŸ”¤8ğŸ”¤ ğŸ”¤9ğŸ”¤ ğŸ†
        ğŸ’­     ğŸ”¤eğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤0ğŸ”¤ ğŸ”¤2ğŸ”¤ ğŸ”¤6ğŸ”¤ ğŸ”¤8ğŸ”¤ ğŸ†
        ğŸ’­     ğŸ”¤fğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤0ğŸ”¤ ğŸ”¤1ğŸ”¤ ğŸ”¤3ğŸ”¤ ğŸ”¤4ğŸ”¤ ğŸ”¤5ğŸ”¤ ğŸ”¤6ğŸ”¤ ğŸ”¤7ğŸ”¤ ğŸ”¤8ğŸ”¤ ğŸ”¤9ğŸ”¤ ğŸ†
        ğŸ’­     ğŸ”¤gğŸ”¤ â¡ï¸ ğŸ¿ ğŸ”¤0ğŸ”¤ ğŸ”¤2ğŸ”¤ ğŸ”¤3ğŸ”¤ ğŸ”¤5ğŸ”¤ ğŸ”¤6ğŸ”¤ ğŸ”¤8ğŸ”¤ ğŸ”¤9ğŸ”¤ ğŸ†
        ğŸ’­ ğŸ† â¡ï¸ digitsByLetter

        0 â¡ï¸ ğŸ–ï¸ğŸ†•decodedOutputSum
        ğŸ”‚ line input ğŸ‡
            ğŸ”«line ğŸ”¤ | ğŸ”¤â— â¡ï¸ halves

            ğŸ½halves 0â— â¡ï¸ definitionString
            ğŸ”«definitionString ğŸ”¤ ğŸ”¤â— â¡ï¸ ğŸ–ï¸ğŸ†•definitions
            ğŸ’­ sort definition string letters alphabetically
            ğŸ°definitions ğŸ‡ definitionğŸ”¡ â¡ï¸ ğŸ”¡
                ğŸ¶definitionâ— â¡ï¸ ğŸ–ï¸ğŸ†•letters
                ğŸ¦letters ğŸ‡ ağŸ”¡ bğŸ”¡ â¡ï¸ ğŸ”¢
                    â†©ï¸ â†”ï¸a bâ—
                ğŸ‰â—
                ğŸ†•ğŸ” â— â¡ï¸ builder
                ğŸ”‚ letter letters ğŸ‡
                    ğŸ»builder letterâ—
                ğŸ‰
                â†©ï¸ ğŸ”¡builderâ—
            ğŸ‰â— â¡ï¸ ğŸ–ï¸definitions

            ğŸ½halves 1â— â¡ï¸ outputString
            ğŸ”«outputString ğŸ”¤ ğŸ”¤â— â¡ï¸ ğŸ–ï¸ğŸ†•outputs
            ğŸ°outputs ğŸ‡ outputğŸ”¡ â¡ï¸ ğŸ”¡
                ğŸ¶outputâ— â¡ï¸ ğŸ–ï¸ğŸ†•letters
                ğŸ¦letters ğŸ‡ ağŸ”¡ bğŸ”¡ â¡ï¸ ğŸ”¢
                    â†©ï¸ â†”ï¸a bâ—
                ğŸ‰â—
                ğŸ†•ğŸ” â— â¡ï¸ builder
                ğŸ”‚ letter letters ğŸ‡
                    ğŸ»builder letterâ—
                ğŸ‰
                â†©ï¸ ğŸ”¡builderâ—
            ğŸ‰â— â¡ï¸ ğŸ–ï¸outputs

            ğŸ’­ sort the definitions to ensure that the easy digits come first
            ğŸ’­ strings of length 2, 4, 3, or 7 go to the top of the list
            ğŸ¦definitions ğŸ‡ ağŸ”¡ bğŸ”¡ â¡ï¸ ğŸ”¢
                ğŸ“ğŸ¶aâ—â“ â¡ï¸ aCount
                ğŸ‘ â¡ï¸ ğŸ–ï¸ğŸ†•aIsSpecial
                â†ªï¸ ğŸ¤œaCount ğŸ™Œ 2ğŸ¤› ğŸ‘ ğŸ¤œaCount ğŸ™Œ 4ğŸ¤› ğŸ‘ ğŸ¤œaCount ğŸ™Œ 3ğŸ¤› ğŸ‘ ğŸ¤œaCount ğŸ™Œ 7ğŸ¤› ğŸ‡
                    ğŸ‘ â¡ï¸ ğŸ–ï¸aIsSpecial 
                ğŸ‰

                ğŸ“ğŸ¶bâ—â“ â¡ï¸ bCount
                ğŸ‘ â¡ï¸ ğŸ–ï¸ğŸ†•bIsSpecial
                â†ªï¸ ğŸ¤œbCount ğŸ™Œ 2ğŸ¤› ğŸ‘ ğŸ¤œbCount ğŸ™Œ 4ğŸ¤› ğŸ‘ ğŸ¤œbCount ğŸ™Œ 3ğŸ¤› ğŸ‘ ğŸ¤œbCount ğŸ™Œ 7ğŸ¤› ğŸ‡
                    ğŸ‘ â¡ï¸ ğŸ–ï¸bIsSpecial 
                ğŸ‰

                â†ªï¸ aIsSpecial ğŸ¤ âbIsSpecialâ— ğŸ‡
                    â†©ï¸ -1
                ğŸ‰
                ğŸ™…â†ªï¸ bIsSpecial ğŸ¤ âaIsSpecialâ— ğŸ‡
                    â†©ï¸ 1
                ğŸ‰
                ğŸ™… ğŸ‡
                    â†©ï¸ aCount â– bCount
                ğŸ‰
            ğŸ‰â—

            ğŸ†•ğŸ¯ğŸšğŸ”¡ğŸ†â— â¡ï¸ ğŸ–ï¸ğŸ†•segmentsToNumber
            ğŸ†•ğŸ¯ğŸšğŸ”¡ğŸ†â— â¡ï¸ ğŸ–ï¸ğŸ†•numberToSegments
            ğŸ”‚ definition definitions ğŸ‡
                ğŸ° ğŸ¿0 1 2 3 4 5 6 7 8 9ğŸ†  ğŸ‡ numğŸ”¢ â¡ï¸ ğŸ”¡
                    â†©ï¸ ğŸ”¡numâ—
                ğŸ‰â— â¡ï¸ ğŸ–ï¸ğŸ†•candidates
                ğŸ¶definitionâ— â¡ï¸ segments
                ğŸ“segmentsâ“ â¡ï¸ segmentCount
                ğŸ’­ filter out digits with the wrong number of segments
                ğŸ­candidates ğŸ‡ numğŸ”¡ â¡ï¸ ğŸ‘Œ
                    ğŸºğŸ½lettersByDigit numâ— â¡ï¸ digitSegments
                    â†©ï¸ ğŸ“digitSegmentsâ“ ğŸ™Œ segmentCount
                ğŸ‰â— â¡ï¸ ğŸ–ï¸candidates
                ğŸ’­ if we already have eliminated all other possibilities, 
                ğŸ’­ map this definition to the correct digit
                â†ªï¸ ğŸ“candidatesâ“ ğŸ™Œ 1 ğŸ‡
                    ğŸ½candidates 0â— â¡ï¸ correctDigit
                    correctDigit â¡ï¸ ğŸ½segmentsToNumber definitionâ—
                    definition â¡ï¸ ğŸ½numberToSegments correctDigitâ—
                ğŸ‰
                ğŸ™… ğŸ‡
                    ğŸ’­ the number must be one of 0, 2, 3, 5, 6, 9
                    ğŸ’­ ğŸ° ğŸ¿0 2 3 5 6 9ğŸ†  ğŸ‡ numğŸ”¢ â¡ï¸ ğŸ”¡
                    ğŸ’­     â†©ï¸ ğŸ”¡numâ—
                    ğŸ’­ ğŸ‰â— â¡ï¸ ğŸ–ï¸candidates
                    ğŸ’­ 0 has 6 segments; the segment it is missing is in 2,3,4,5,6,8
                    ğŸ’­ 2 has 5 segments; the segments it is missing:
                    ğŸ’­ - the upper segment is in 0,4,5,6,8,9
                    ğŸ’­ - the lower segment is in 0,1,3,4,5,6,7,8,9
                    ğŸ’­ *** 2 is the only number without the segment f
                    ğŸ’­ 3 has 5 segments; the segments it is missing:
                    ğŸ’­ - the upper segment is in 0,4,5,6,8,9
                    ğŸ’­ - the lower segment is in 0,2,6,8
                    ğŸ’­ 5 has 5 segments; the segments it is missing:
                    ğŸ’­ - the upper segment is in 0,1,2,3,4,7,8,9
                    ğŸ’­ - the lower segment is in 0,2,6,8
                    ğŸ’­ 6 has 6 segments; the segment it is missing is in 0,1,2,3,4,7,8,9
                    ğŸ’­ *** 6 and 5 are the only digits with that missing segment
                    ğŸ’­ 9 has 6 segments; the segment it is missing is in 0,2,6,8

                    ğŸ’­ we already know the digits 1,4,7,8...
                    ğŸ’­ 8 is totally not helpful

                    ğŸ’­ all segments from 4 are in 9 AND NOTHING ELSE
                    ğŸ¶ğŸºğŸ½numberToSegments ğŸ”¤4ğŸ”¤â—â— â¡ï¸ fourSegments
                    0 â¡ï¸ ğŸ–ï¸ğŸ†•segmentsInCommonWith4
                    ğŸ”‚ segment fourSegments ğŸ‡
                        â†ªï¸ ğŸ¦segments segmentâ“ ğŸ‡
                            segmentsInCommonWith4 â¬…ï¸â• 1
                        ğŸ‰
                    ğŸ‰
                    â†ªï¸ segmentsInCommonWith4 ğŸ™Œ 4 ğŸ‡
                        ğŸ”¤9ğŸ”¤ â¡ï¸ ğŸ½segmentsToNumber definitionâ—
                        definition â¡ï¸ ğŸ½numberToSegments ğŸ”¤9ğŸ”¤â—
                    ğŸ‰
                    ğŸ™…â†ªï¸ segmentsInCommonWith4 ğŸ™Œ 2 ğŸ‡
                        ğŸ”¤2ğŸ”¤ â¡ï¸ ğŸ½segmentsToNumber definitionâ—
                        definition â¡ï¸ ğŸ½numberToSegments ğŸ”¤2ğŸ”¤â—
                    ğŸ‰
                    ğŸ™… ğŸ‡
                        ğŸ’­ it's not 9 or 2...
                        ğŸ’­ ğŸ° ğŸ¿0 3 5 6ğŸ†  ğŸ‡ numğŸ”¢ â¡ï¸ ğŸ”¡
                        ğŸ’­     â†©ï¸ ğŸ”¡numâ—
                        ğŸ’­ ğŸ‰â— â¡ï¸ ğŸ–ï¸candidates

                        ğŸ’­ all segments from the digit 7 are in 0,3
                        ğŸ’­ all segments from the digit 1 are in 0,3
                        ğŸ¶ğŸºğŸ½numberToSegments ğŸ”¤1ğŸ”¤â—â— â¡ï¸ oneSegments
                        0 â¡ï¸ ğŸ–ï¸ğŸ†•segmentsInCommonWith1
                        ğŸ”‚ segment oneSegments ğŸ‡
                            â†ªï¸ ğŸ¦segments segmentâ“ ğŸ‡
                                segmentsInCommonWith1 â¬…ï¸â• 1
                            ğŸ‰
                        ğŸ‰

                        â†ªï¸ segmentsInCommonWith1 ğŸ™Œ 1 ğŸ¤ segmentCount ğŸ™Œ 5 ğŸ‡
                            ğŸ”¤5ğŸ”¤ â¡ï¸ ğŸ½segmentsToNumber definitionâ—
                            definition â¡ï¸ ğŸ½numberToSegments ğŸ”¤5ğŸ”¤â—
                        ğŸ‰
                        ğŸ™…â†ªï¸ segmentsInCommonWith1 ğŸ™Œ 1 ğŸ¤ segmentCount ğŸ™Œ 6 ğŸ‡
                            ğŸ”¤6ğŸ”¤ â¡ï¸ ğŸ½segmentsToNumber definitionâ—
                            definition â¡ï¸ ğŸ½numberToSegments ğŸ”¤6ğŸ”¤â—
                        ğŸ‰
                        ğŸ™…â†ªï¸ segmentsInCommonWith1 ğŸ™Œ 2 ğŸ¤ segmentCount ğŸ™Œ 5 ğŸ‡
                            ğŸ”¤3ğŸ”¤ â¡ï¸ ğŸ½segmentsToNumber definitionâ—
                            definition â¡ï¸ ğŸ½numberToSegments ğŸ”¤3ğŸ”¤â—
                        ğŸ‰
                        ğŸ™…â†ªï¸ segmentsInCommonWith1 ğŸ™Œ 2 ğŸ¤ segmentCount ğŸ™Œ 6 ğŸ‡
                            ğŸ”¤0ğŸ”¤ â¡ï¸ ğŸ½segmentsToNumber definitionâ—
                            definition â¡ï¸ ğŸ½numberToSegments ğŸ”¤0ğŸ”¤â—
                        ğŸ‰
                        ğŸ™… ğŸ‡
                            ğŸ˜€ğŸ”¤ğŸš¨ğŸ˜¬ something is seriously wrong with this algorithm...ğŸ”¤â—
                        ğŸ‰

                    ğŸ‰


                ğŸ‰
            ğŸ‰

            ğŸ’­ if all went well above we should now have a mapping of definitions; 
            ğŸ’­ it's time to decode the output!

            ğŸ™numberToSegmentsâ— â¡ï¸ numbersIdentified
            ğŸ†•ğŸ” â— â¡ï¸ debugBuilder
            ğŸ”‚ num numbersIdentified ğŸ‡
                ğŸ»debugBuilder numâ—
            ğŸ‰
            ğŸ’­ ğŸ˜€ğŸ”¡debugBuilderâ—â—
            
            ğŸ™segmentsToNumberâ— â¡ï¸ segmentsIdentified
            ğŸ†•ğŸ” â— â¡ï¸ debugBuilder2
            ğŸ”‚ segment segmentsIdentified ğŸ‡
                ğŸ»debugBuilder2 ğŸ”¤ğŸ§²segmentğŸ§² ğŸ”¤â—
            ğŸ‰
            ğŸ’­ ğŸ˜€ğŸ”¡debugBuilder2â—â—

            ğŸ†•ğŸ” â— â¡ï¸ outputBuilder
            ğŸ”‚ output outputs ğŸ‡
                ğŸ’­ ğŸ˜€outputâ—
                ğŸºğŸ½segmentsToNumber outputâ— â¡ï¸ digit
                ğŸ»outputBuilder digitâ—
            ğŸ‰
            ğŸ”¡outputBuilderâ— â¡ï¸ decodedDigits
            ğŸºğŸ”¢decodedDigits 10â— â¡ï¸ decodedOutput
            decodedOutputSum â¬…ï¸â• decodedOutput
        ğŸ‰

        â†©ï¸ ğŸ”¡decodedOutputSumâ—
    ğŸ‰

ğŸ‰
