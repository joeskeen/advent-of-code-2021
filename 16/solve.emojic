ğŸ“œ ğŸ”¤../emojicode/common.emojicğŸ”¤

ğŸ‡ ğŸ† ğŸ‡
    ğŸ“— Returns the valid test case names for this puzzle ğŸ“—
    ğŸ‡ â“ğŸ§ª â¡ï¸ ğŸ¨ğŸšğŸ”¡ğŸ† ğŸ‡
        â†©ï¸ ğŸ¿ ğŸ”¤00ğŸ”¤ ğŸ”¤01ğŸ”¤ ğŸ”¤02ğŸ”¤ ğŸ”¤03ğŸ”¤ ğŸ†
    ğŸ‰

    ğŸ“— Returns the solution fğŸ—‚ï¸or part A of the puzzle ğŸ“—
    ğŸ‡ â“ğŸ…°ï¸ inputğŸ¨ğŸšğŸ”¡ğŸ† â¡ï¸ ğŸ”¡ ğŸ‡
        âœ‰ï¸ğŸ‡ğŸ­ ğŸ½input 0â—â— â¡ï¸ packet

        ğŸ’­ convert the result to string and return
        â†©ï¸ ğŸ”¤ğŸ¤¦ Oops, we haven't implemented this yet...ğŸ”¤
    ğŸ‰
    
    ğŸ“— Returns the solution for part B of the puzzle ğŸ“—
    ğŸ‡ â“ğŸ…±ï¸ inputğŸ¨ğŸšğŸ”¡ğŸ† â¡ï¸ ğŸ”¡ ğŸ‡
        â†©ï¸ ğŸ”¤ğŸ¤¦ Oops, we haven't implemented this yet...ğŸ”¤
    ğŸ‰
ğŸ‰

ğŸ‡ ğŸ­ ğŸ‡    
    ğŸ‡ â—âœ‰ï¸ packetHexğŸ”¡ â¡ï¸ âœ‰ï¸ ğŸ‡
        ğŸ’­ Convert the hex string to binary string
        ğŸ¿
            ğŸ”¤0ğŸ”¤ â¡ï¸ ğŸ”¤0000ğŸ”¤
            ğŸ”¤1ğŸ”¤ â¡ï¸ ğŸ”¤0001ğŸ”¤
            ğŸ”¤2ğŸ”¤ â¡ï¸ ğŸ”¤0010ğŸ”¤
            ğŸ”¤3ğŸ”¤ â¡ï¸ ğŸ”¤0011ğŸ”¤
            ğŸ”¤4ğŸ”¤ â¡ï¸ ğŸ”¤0100ğŸ”¤
            ğŸ”¤5ğŸ”¤ â¡ï¸ ğŸ”¤0101ğŸ”¤
            ğŸ”¤6ğŸ”¤ â¡ï¸ ğŸ”¤0110ğŸ”¤
            ğŸ”¤7ğŸ”¤ â¡ï¸ ğŸ”¤0111ğŸ”¤
            ğŸ”¤8ğŸ”¤ â¡ï¸ ğŸ”¤1000ğŸ”¤
            ğŸ”¤9ğŸ”¤ â¡ï¸ ğŸ”¤1001ğŸ”¤
            ğŸ”¤AğŸ”¤ â¡ï¸ ğŸ”¤1010ğŸ”¤
            ğŸ”¤BğŸ”¤ â¡ï¸ ğŸ”¤1011ğŸ”¤
            ğŸ”¤CğŸ”¤ â¡ï¸ ğŸ”¤1100ğŸ”¤
            ğŸ”¤DğŸ”¤ â¡ï¸ ğŸ”¤1101ğŸ”¤
            ğŸ”¤EğŸ”¤ â¡ï¸ ğŸ”¤1110ğŸ”¤
            ğŸ”¤FğŸ”¤ â¡ï¸ ğŸ”¤1111ğŸ”¤
        ğŸ† â¡ï¸ hexToBinary
        ğŸ†•ğŸ” â— â¡ï¸ binaryBuilder
        ğŸ”‚ hex ğŸ¶packetHexâ— ğŸ‡
            ğŸ»binaryBuilder ğŸºğŸ½hexToBinary ğŸ”§hexâ—â—â—
        ğŸ‰
        ğŸ”¡binaryBuilderâ— â¡ï¸ binaryString
        ğŸ¶binaryStringâ— â¡ï¸ bits

        ğŸ“¨ğŸ‡ğŸ­ bits 0â— â¡ï¸ packet
        â†©ï¸ packet
    ğŸ‰

    ğŸ‡ â—ğŸ“¨ bitsğŸ¨ğŸšğŸ”¡ğŸ† startIndexğŸ”¢ â¡ï¸ âœ‰ï¸ ğŸ‡
        0 â¡ï¸ ğŸ–ï¸ğŸ†•pointer
        ğŸ’­ Keep track of where we started
        pointer â¡ï¸ packetStartPointer

        ğŸ’­ Read three bits as the packet version
        ğŸ”¤ğŸ§²ğŸ½bits pointerâ—ğŸ§²ğŸ§²ğŸ½bits ğŸ¤œpointer â• 1ğŸ¤›â—ğŸ§²ğŸ§²ğŸ½bits ğŸ¤œpointer â• 2ğŸ¤›â—ğŸ§²ğŸ”¤ â¡ï¸ packetVersionString
        pointer â¬…ï¸â• 3
        ğŸºğŸ”¢packetVersionString 2â— â¡ï¸ packetVersion

        ğŸ’­ Read three bits as the packet type
        ğŸ”¤ğŸ§²ğŸ½bits pointerâ—ğŸ§²ğŸ§²ğŸ½bits ğŸ¤œpointer â• 1ğŸ¤›â—ğŸ§²ğŸ§²ğŸ½bits ğŸ¤œpointer â• 2ğŸ¤›â—ğŸ§²ğŸ”¤ â¡ï¸ packetTypeString
        pointer â¬…ï¸â• 3
        ğŸºğŸ”¢packetTypeString 2â— â¡ï¸ packetType

        ğŸ’­ Depending on the packet type we proceed differently
        â†ªï¸ packetType ğŸ™Œ 4 ğŸ‡
            ğŸ’­ Read a Literal packet
            ğŸ‘ â¡ï¸ ğŸ–ï¸ğŸ†•packetDone
            ğŸ†•ğŸ” â— â¡ï¸ literalBuilder
            ğŸ” âpacketDoneâ— ğŸ‡
                ğŸ’­ the first bit indicates whether we have reached the last 5 bits of the packet
                ğŸ½bits pointerâ— â¡ï¸ firstBit
                pointer â¬…ï¸â• 1
                â†ªï¸ firstBit ğŸ™Œ ğŸ”¤0ğŸ”¤ ğŸ‡
                    ğŸ‘ â¡ï¸ ğŸ–ï¸packetDone
                ğŸ‰

                ğŸ”¤ğŸ§²ğŸ½bits pointerâ—ğŸ§²ğŸ§²ğŸ½bits ğŸ¤œpointer â• 1ğŸ¤›â—ğŸ§²ğŸ§²ğŸ½bits ğŸ¤œpointer â• 2ğŸ¤›â—ğŸ§²ğŸ§²ğŸ½bits ğŸ¤œpointer â• 3ğŸ¤›â—ğŸ§²ğŸ”¤ â¡ï¸ nextFourBits
                ğŸ»literalBuilder nextFourBitsâ—
                pointer â¬…ï¸â• 4
            ğŸ‰
            
            ğŸ’­ put all the literal bits together and turn it into a number
            ğŸ”¡literalBuilderâ— â¡ï¸ literalBits
            ğŸºğŸ”¢literalBits 2â— â¡ï¸ literalValue

            pointer â– packetStartPointer â¡ï¸ packetLength

            ğŸ’­ construct the packet
            ğŸ†•ğŸ¥¡ packetVersion packetType packetLength literalValue â— â¡ï¸ packet
            â†©ï¸ packet
        ğŸ‰
        ğŸ™… ğŸ‡
            ğŸ’­ read an Operator packet
            
            ğŸ’­ get the sub packet length
            ğŸ½bits pointerâ— â¡ï¸ lengthTypeId
            pointer â¬…ï¸â• 1
            0 â¡ï¸ ğŸ–ï¸ğŸ†•subPacketLengthFieldLength
            â†ªï¸ lengthTypeId ğŸ™Œ ğŸ”¤0ğŸ”¤ ğŸ‡
                15 â¡ï¸ ğŸ–ï¸subPacketLengthFieldLength
            ğŸ‰
            ğŸ™… ğŸ‡
                11 â¡ï¸ ğŸ–ï¸subPacketLengthFieldLength
            ğŸ‰
            
            ğŸ†•ğŸ” â— â¡ï¸ subPacketLengthBuilder
            ğŸ”‚ i ğŸ†•â© 0 subPacketLengthFieldLength 1 â— ğŸ‡
                ğŸ»subPacketLengthBuilder ğŸ½bits pointerâ—â—
                pointer â¬…ï¸â• 1
            ğŸ‰
            ğŸ”¡subPacketLengthBuilderâ— â¡ï¸ subPacketLengthBits
            ğŸºğŸ”¢subPacketLengthBits 2â— â¡ï¸ subPacketLength

            ğŸ’­ read the sub-packets
            ğŸ†•ğŸ¨ğŸšâœ‰ï¸ğŸ†â— â¡ï¸ ğŸ–ï¸ğŸ†•subPackets
            0 â¡ï¸ ğŸ–ï¸ğŸ†•readPacketBits
            ğŸ” readPacketBits â—€ï¸ subPacketLength ğŸ‡
                ğŸ“¨ğŸ‡ğŸ­ bits pointerâ— â¡ï¸ subPacket
                ğŸ»subPackets subPacketâ—
                readPacketBits â¬…ï¸â• ğŸ“subPacketâ“
                pointer â¬…ï¸â• ğŸ“subPacketâ“
            ğŸ‰

            pointer â– packetStartPointer â¡ï¸ packetLength

            ğŸ†•ğŸ—‚ï¸ packetLength packetVersion packetType subPackets â— â¡ï¸ packet
            â†©ï¸ packet
        ğŸ‰
    ğŸ‰
ğŸ‰

ğŸ‡ âœ‰ï¸ ğŸ‡
    ğŸ–ï¸ğŸ†•packetVersionğŸ”¢
    ğŸ–ï¸ğŸ†•packetTypeğŸ”¢
    ğŸ–ï¸ğŸ†•packetLengthğŸ”¢

    ğŸ†• ğŸ¼packetVersionğŸ”¢ ğŸ¼packetTypeğŸ”¢ ğŸ¼packetLengthğŸ”¢ ğŸ‡ğŸ‰

    ğŸ“— returns the version of the packet ğŸ“—
    â“â²ï¸ â¡ï¸ ğŸ”¢ ğŸ‡ â†©ï¸ packetVersion ğŸ‰

    ğŸ“— returns the type of the packet ğŸ“—
    â“ğŸ â¡ï¸ ğŸ”¢ ğŸ‡ â†©ï¸ packetType ğŸ‰

    ğŸ“— returns the number of bits this packet uses up ğŸ“—
    â“ğŸ“ â¡ï¸ ğŸ”¢ ğŸ‡ â†©ï¸ packetLength ğŸ‰
ğŸ‰

ğŸ“— literal packet class ğŸ“—
ğŸ‡ ğŸ¥¡ âœ‰ï¸ ğŸ‡
    ğŸ–ï¸ğŸ†•literalValueğŸ”¢

    ğŸ†• packetVersionğŸ”¢ packetTypeğŸ”¢ packetLengthğŸ”¢ ğŸ¼literalValueğŸ”¢ ğŸ‡
        â¤´ï¸ğŸ†• packetVersion packetType packetLength â—
    ğŸ‰

    ğŸ“— returns the literal value stored in this packet ğŸ“—
    â“ğŸ”¢ â¡ï¸ ğŸ”¢ ğŸ‡ â†©ï¸ literalValue ğŸ‰
ğŸ‰

ğŸ“— operator packet class ğŸ“—
ğŸ‡ ğŸ—‚ï¸ âœ‰ï¸ ğŸ‡
    ğŸ–ï¸ğŸ†•subPacketsğŸ¨ğŸšâœ‰ï¸ğŸ†

    ğŸ†• packetVersionğŸ”¢ packetTypeğŸ”¢ packetLengthğŸ”¢ ğŸ¼subPacketsğŸ¨ğŸšâœ‰ï¸ğŸ† ğŸ‡
        â¤´ï¸ğŸ†• packetVersion packetType packetLength â—
    ğŸ‰

    ğŸ“— returns the sub-packets stored in this packet ğŸ“—
    â“ğŸ—‚ï¸ â¡ï¸ ğŸ¨ğŸšâœ‰ï¸ğŸ† ğŸ‡ â†©ï¸ subPackets ğŸ‰
ğŸ‰
ğŸ’­ common.emojic